<html>
<head>
	<title>ACVD UNACオペレーションカスタム共有ツール</title>
	<meta name="viewport" content="width=device-width,initial-scale=1.0">
	<script>
		window.onload = function(){
			function load(...path){
				let request = new XMLHttpRequest();
				let url = concat(['.', 'csv'], path, ['chips.csv']).join('/');
				request.open('GET', url, false);
				request.overrideMimeType('text/plain; charset=Shift_JIS');
				request.send();
				
				let csv = request.responseText.split('\r\n').filter((line, index) => line != '' && index > 0);
				let chips = category[categoryNames[0]] = csv.map(line => {
					let values = line.split(',');
					let id = values[0];
					let name = values[1];
					let group = values[2];
					let message = values[3];
					let numberOfChips = values[4];
					let chip = {id, name, group, message, numberOfChips};
					return chip;
				});
				return chips;
			}
			
			let categoryNames = ['moving', 'right-arm', 'left-arm', 'shoulder', 'recognition', 'target-evaluation', 'dodge', 'special-moving', 'special-action'];
			let chips = {operation: [], category: {}, action: {}};
			
			chips.operation = load('operation');
			chips.category = load('category', categoryNames[0]);
			
			
			console.log(JSON.stringify(chips));
		}
	</script>
</head>
<body>
</body>
</html>
